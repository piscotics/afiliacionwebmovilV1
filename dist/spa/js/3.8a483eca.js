(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[3],{"30f7":function(e,a,t){"use strict";t.d(a,"a",(function(){return c}));var o=t("7424"),i=t("7cf4"),l=t("18d6");let s,n,r=l["a"].getItem("pisco-afilweb");const c={departments:async()=>{let e={"Content-Type":"application/json"},a={subdominio:r.subdomain};return await o["a"].get(i["a"].apiDepartamento+"list/",{params:a,headers:e}).then((e=>e)).catch((e=>e.response))},cities:async e=>{const a={"Content-Type":"application/json"};let t={codDepartamento:e,subdominio:r.subdomain};return await o["a"].get(i["a"].apiDepartamento+"cities/",{params:t,headers:a}).then((e=>e)).catch((e=>e.response))},paymentMethods:async()=>{let e={"Content-Type":"application/json"},a={subdominio:r.subdomain};return await o["a"].get(i["a"].apiFormaPago+"list/",{params:a,headers:e}).then((e=>e)).catch((e=>e.response))},paymentTypes:async()=>{console.log("llego a cargar tipos pagos");let e={"Content-Type":"application/json"},a={subdominio:r.subdomain};return await o["a"].get(i["a"].apiTipoPago+"list/",{params:a,headers:e}).then((e=>e)).catch((e=>e.response))},cash:async()=>{let e={"Content-Type":"application/json"},a={subdominio:r.subdomain};return await o["a"].get(i["a"].apiCaja+"list/",{params:a,headers:e}).then((e=>e)).catch((e=>e.response))},novelty:async()=>{let e={"Content-Type":"application/json"},a={subdominio:r.subdomain};return await o["a"].get(i["a"].apiNovelty+"list/",{params:a,headers:e}).then((e=>e)).catch((e=>e.response))},serviceadicional:async e=>{let a,t={"Content-Type":"application/json"};return"Paga Valor Por el Grupo"==e?a={TIPOSERVICIO:1,subdominio:r.subdomain}:"Paga valor por Cada Una de las Personas"==e?a={TIPOSERVICIO:2,subdominio:r.subdomain}:"Paga valor Por una Persona en Especial"==e&&(a={TIPOSERVICIO:3,subdominio:r.subdomain}),await o["a"].get(i["a"].apiServiceadicional+"list/",{params:a,headers:t}).then((e=>e)).catch((e=>e.response))},titularesBeneficiarios:async()=>{let e={"Content-Type":"application/json"};s=l["a"].getItem("identificacionTitular"),n=l["a"].getItem("contratoTitular");let a={subdominio:r.subdomain,identificaciontitular:s,idcontrato:n};return await o["a"].get(i["a"].apiTitularesBeneficiarios+"list/",{params:a,headers:e}).then((e=>e)).catch((e=>e.response))}}},"4e84":function(e,a,t){"use strict";t.d(a,"a",(function(){return n}));var o=t("7424"),i=t("7cf4"),l=t("18d6");let s=l["a"].getItem("pisco-afilweb");const n={list:async()=>{let e={subdominio:s.subdomain};return await o["a"].get(i["a"].apiZona+"list/",{params:e}).then((e=>e)).catch((e=>e.response))},create:async e=>{let a={nombreZona:e,subdominio:s.subdomain};return await o["a"].post(i["a"].apiZona+"create/",a,{}).then((e=>e)).catch((e=>e.response))},edit:async(e,a)=>{let t={id:e,nombreZona:a,subdominio:s.subdomain};return await o["a"].put(i["a"].apiZona+"update",t,{headers:{"Access-Control-Allow-Origin":"*"}}).then((e=>e)).catch((e=>e.response))}}},6074:function(e,a,t){"use strict";t.d(a,"a",(function(){return n}));var o=t("7424"),i=t("7cf4"),l=t("18d6");let s=l["a"].getItem("pisco-afilweb");const n={list:async()=>{let e={"Content-Type":"application/json"},a={subdominio:s.subdomain};return await o["a"].get(i["a"].apiPlan+"list/",{params:a,headers:e}).then((e=>e)).catch((e=>e.response))},create:async e=>{let a={"Content-Type":"application/json"},t={nombrePlan:e.name,valorBase:e.valorBase,valorAdicional:e.valorAdicional,estado:e.estado?0:1,subdominio:s.subdomain};return await o["a"].post(i["a"].apiPlan+"create/",t,{headers:a}).then((e=>e)).catch((e=>e.response))},edit:async(e,a)=>{let t={"Content-Type":"application/json"},l={id:e,nombrePlan:a.name,valorBase:a.valorBase,valorAdicional:a.valorAdicional,estado:a.estado?0:1,subdominio:s.subdomain};return await o["a"].put(i["a"].apiPlan+"update/",l,{headers:t}).then((e=>e)).catch((e=>e.response))},get:async e=>{const a={"Content-Type":"application/json"};let t={id:e,subdominio:s.subdomain};return await o["a"].get(i["a"].apiPlan+"get/",{params:t,headers:a}).then((e=>e)).catch((e=>e.response))}}},"773c":function(e,a,t){"use strict";t.r(a);var o=function(){var e=this,a=this,t=a.$createElement,o=a._self._c||t;return o("div",{staticClass:"q-pa-md"},[o("q-inner-loading",{attrs:{showing:a.loading}},[o("q-spinner-gears",{attrs:{size:"50px",color:"primary"}})],1),o("q-stepper",{ref:"stepper",attrs:{animated:"","done-color":"deep-orange","active-color":"purple","inactive-color":"secondary"},model:{value:a.step,callback:function(e){a.step=e},expression:"step"}},[o("q-step",{attrs:{name:1,title:"Contratante",icon:"settings",done:a.step>1}},[o("q-form",{ref:"form_contrato"},[o("div",{staticClass:"row q-col-gutter-sm"},[o("div",{staticClass:"col-12 col-md-2 col-sm-4"},[o("q-input",{attrs:{filled:"",type:"number",label:"* Identificacion",rules:a.numberRules},model:{value:a.titular.identificacion,callback:function(e){a.$set(a.titular,"identificacion",e)},expression:"titular.identificacion"}})],1),o("div",{staticClass:"col-12 col-md-3 col-sm-4"},[o("q-input",{attrs:{filled:"",type:"text",label:"* Nombre 1",rules:a.textRules},model:{value:a.titular.nombre1,callback:function(e){a.$set(a.titular,"nombre1",e)},expression:"titular.nombre1"}})],1),o("div",{staticClass:"col-12 col-md-2 col-sm-4"},[o("q-input",{attrs:{filled:"",type:"text",label:"Nombre 2",maxlength:"20"},model:{value:a.titular.nombre2,callback:function(e){a.$set(a.titular,"nombre2",e)},expression:"titular.nombre2"}})],1),o("div",{staticClass:"col-12 col-md-3 col-sm-4"},[o("q-input",{attrs:{filled:"",type:"text",label:"* Apellido 1",rules:a.textRules},model:{value:a.titular.apellido1,callback:function(e){a.$set(a.titular,"apellido1",e)},expression:"titular.apellido1"}})],1),o("div",{staticClass:"col-12 col-md-2 col-sm-4"},[o("q-input",{attrs:{filled:"",type:"text",label:"Apellido 2",maxlength:"20"},model:{value:a.titular.apellido2,callback:function(e){a.$set(a.titular,"apellido2",e)},expression:"titular.apellido2"}})],1),o("div",{staticClass:"col-12 col-md-2 col-sm-4"},[o("q-input",{attrs:{filled:"",label:"*Fecha Nacimiento",rules:a.textRules,clearable:""},scopedSlots:a._u([{key:"append",fn:function(){return[o("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[o("q-popup-proxy",{ref:"qDateProxy",attrs:{"transition-show":"scale","transition-hide":"scale"}},[o("q-date",{attrs:{options:a.optionDatePicker,mask:"YYYY-MM-DD"},model:{value:a.titular.fechaNacimiento,callback:function(e){a.$set(a.titular,"fechaNacimiento",e)},expression:"titular.fechaNacimiento"}},[o("div",{staticClass:"row items-center justify-end"},[o("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Cerrar",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0}]),model:{value:a.titular.fechaNacimiento,callback:function(e){a.$set(a.titular,"fechaNacimiento",e)},expression:"titular.fechaNacimiento"}})],1),o("div",{staticClass:"col-12 col-md-2 col-sm-3"},[o("q-select",{attrs:{filled:"",value:a.genero,options:a.optGenero,label:"* Genero",rules:a.selRules},model:{value:a.genero,callback:function(e){a.genero=e},expression:"genero"}})],1),o("div",{staticClass:"col-12 col-md-2 col-sm-5"},[o("q-select",{attrs:{filled:"",options:a.departamentos,"option-value":"codDepartamento","option-label":"departamento",label:"* Departamento","emit-value":"","map-options":"",disable:0==a.departamentos.length,rules:a.selRules},on:{input:function(e){a.loadCities(e)}},model:{value:a.titular.departamento.codDepartamento,callback:function(e){a.$set(a.titular.departamento,"codDepartamento",e)},expression:"titular.departamento.codDepartamento"}})],1),o("div",{staticClass:"col-12 col-md-3 col-sm-4"},[o("q-select",{attrs:{filled:"",options:a.municipios,"option-value":"idMunicipio","option-label":"municipio",label:"* Municipio","emit-value":"","map-options":"",rules:a.selRules,disable:a.disabled},model:{value:a.titular.municipio.idMunicipio,callback:function(e){a.$set(a.titular.municipio,"idMunicipio",e)},expression:"titular.municipio.idMunicipio"}})],1),o("div",{staticClass:"col-12 col-md-3 col-sm-5"},[o("q-input",{attrs:{filled:"",type:"text",label:"* Direccion",rules:a.direccionRules},model:{value:a.titular.direccion,callback:function(e){a.$set(a.titular,"direccion",e)},expression:"titular.direccion"}})],1),o("div",{staticClass:"col-12 col-md-2 col-sm-4"},[o("q-input",{attrs:{filled:"",type:"text",label:"Barrio"},model:{value:a.titular.barrio,callback:function(e){a.$set(a.titular,"barrio",e)},expression:"titular.barrio"}})],1),o("div",{staticClass:"col-12 col-md-3 col-sm-3"},[o("q-input",{attrs:{filled:"",type:"number",label:"* Celular 1",rules:a.telRules},model:{value:a.titular.celular1,callback:function(e){a.$set(a.titular,"celular1",e)},expression:"titular.celular1"}})],1),o("div",{staticClass:"col-12 col-md-3 col-sm-6"},[o("q-input",{attrs:{filled:"",type:"email",label:"* Email",rules:[function(e){return!!e||"Email Obligatorio"},a.isValidEmail]},model:{value:a.titular.email,callback:function(e){a.$set(a.titular,"email",e)},expression:"titular.email"}})],1),o("div",{staticClass:"col-12 col-md-2 col-sm-3"},[o("q-input",{attrs:{filled:"",type:"text",label:"Teléfono"},model:{value:a.titular.telefono,callback:function(e){a.$set(a.titular,"telefono",e)},expression:"titular.telefono"}})],1),o("div",{staticClass:"col-12 col-md-2 col-sm-3"},[o("q-input",{attrs:{filled:"",type:"number",label:"Celular 2",maxlength:"20"},model:{value:a.titular.celular2,callback:function(e){a.$set(a.titular,"celular2",e)},expression:"titular.celular2"}})],1),o("div",{staticClass:"col-12 col-md-2 col-sm-6"},[a.isEdit?o("q-input",{attrs:{filled:"",label:"Fecha Cobertura",clearable:"",disable:""},scopedSlots:a._u([{key:"append",fn:function(){return[o("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[o("q-popup-proxy",{ref:"qDateProxy",attrs:{"transition-show":"scale","transition-hide":"scale"}},[o("q-date",{attrs:{options:a.optionDatePicker,mask:"YYYY-MM-DD"},model:{value:a.titular.fechaCobertura,callback:function(e){a.$set(a.titular,"fechaCobertura",e)},expression:"titular.fechaCobertura"}},[o("div",{staticClass:"row items-center justify-end"},[o("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Cerrar",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0}],null,!1,1980470376),model:{value:a.titular.fechaCobertura,callback:function(e){a.$set(a.titular,"fechaCobertura",e)},expression:"titular.fechaCobertura"}}):a._e()],1)])]),o("q-stepper-navigation",[o("q-btn",{staticClass:"q-mr-sm",attrs:{type:"reset",label:"Nuevo",color:"amber-5"},on:{click:function(e){return e.preventDefault(),a.newContract.apply(null,arguments)}}}),o("q-btn",{attrs:{color:"primary",label:"Continuar"},on:{click:function(){e.$refs.form_contrato.validate().then((function(e){e&&(a.step=2)}))}}})],1)],1),o("q-step",{attrs:{name:2,title:"Contrato",icon:"person",done:a.step>2}},[o("q-form",{ref:"form_titular"},[o("div",{staticClass:"row q-col-gutter-sm"},[o("div",{staticClass:"col-12 col-md-4 col-sm-4"},[o("q-input",{attrs:{filled:"",value:a.contrato.idContrato,type:"number",label:"Nro Contrato",disable:""},model:{value:a.contrato.idContrato,callback:function(e){a.$set(a.contrato,"idContrato",e)},expression:"contrato.idContrato"}})],1),o("div",{staticClass:"col-12 col-md-4 col-sm-4"},[o("q-input",{attrs:{filled:"",label:"Fecha Afiliación",rules:a.textRules,readonly:""},scopedSlots:a._u([{key:"append",fn:function(){return[o("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[o("q-popup-proxy",{ref:"qDateProxy",attrs:{"transition-show":"scale","transition-hide":"scale"}},[o("q-date",{attrs:{options:a.optionDatePicker,mask:"YYYY-MM-DD"},model:{value:a.fechaAfiliacion,callback:function(e){a.fechaAfiliacion=e},expression:"fechaAfiliacion"}},[o("div",{staticClass:"row items-center justify-end"},[o("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Cerrar",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0}]),model:{value:a.fechaAfiliacion,callback:function(e){a.fechaAfiliacion=e},expression:"fechaAfiliacion"}})],1),o("div",{staticClass:"col-12 col-md-4 col-sm-4"},[o("q-select",{attrs:{filled:"",options:a.optTipoAfiliacion,label:"* Tipo Afiliación",rules:a.selRules},on:{input:function(e){a.loadEmpresas(e)}},model:{value:a.contrato.tipoAfiliacion,callback:function(e){a.$set(a.contrato,"tipoAfiliacion",e)},expression:"contrato.tipoAfiliacion"}})],1),o("div",{staticClass:"col-12 col-md-4 col-sm-4"},[a.estadoTipoAfiliacion?o("q-select",{attrs:{filled:"",options:a.empresas,"option-value":"nitEmpresa","option-label":"empresa","emit-value":"","map-options":"",label:"* Empresa"},model:{value:a.contrato.empresas.nitEmpresa,callback:function(e){a.$set(a.contrato.empresas,"nitEmpresa",e)},expression:"contrato.empresas.nitEmpresa"}}):a._e()],1),o("div",{staticClass:"col-12 col-md-4 col-sm-4"},[o("q-select",{attrs:{filled:"",options:a.zonas,"option-value":"id","option-label":"nombreZona","emit-value":"","map-options":"",label:"* Zona"},model:{value:a.contrato.zona.id,callback:function(e){a.$set(a.contrato.zona,"id",e)},expression:"contrato.zona.id"}})],1),o("div",{staticClass:"col-12 col-md-4 col-sm-4"},[o("q-input",{attrs:{filled:"",value:a.vigenciaDesde,label:"* Inicio de Vigencia",rules:a.textRules,readonly:""},scopedSlots:a._u([{key:"append",fn:function(){return[o("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[o("q-popup-proxy",{ref:"qDateProxy",attrs:{"transition-show":"scale","transition-hide":"scale"}},[o("q-date",{attrs:{options:a.optionDatePickerDesde,mask:"YYYY-MM-DD"},on:{input:a.calcularVigenciaHasta},model:{value:a.vigenciaDesde,callback:function(e){a.vigenciaDesde=e},expression:"vigenciaDesde"}},[o("div",{staticClass:"row items-center justify-end"},[o("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Cerrar",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0}])})],1),o("div",{staticClass:"col-12 col-md-4 col-sm-4"},[o("q-input",{attrs:{filled:"",label:"* Final de Vigencia",rules:a.textRules,disable:""},model:{value:a.contrato.vigenciaHasta,callback:function(e){a.$set(a.contrato,"vigenciaHasta",e)},expression:"contrato.vigenciaHasta"}})],1),o("div",{staticClass:"col-12 col-md-4 col-sm-4"},[o("q-select",{attrs:{filled:"",options:a.planes,"option-value":"id","option-label":"nombrePlan",label:"* Plan","emit-value":"","map-options":"",rules:a.selRules},on:{input:function(e){a.loadValorPlan(e)}},model:{value:a.contrato.plan.id,callback:function(e){a.$set(a.contrato.plan,"id",e)},expression:"contrato.plan.id"}})],1),o("div",{staticClass:"col-12 col-md-4 col-sm-4"},[o("q-input",{attrs:{filled:"",value:a.diaCobro,type:"number",label:"* Dia de cobro",rules:a.cobroRules},model:{value:a.diaCobro,callback:function(e){a.diaCobro=e},expression:"diaCobro"}})],1),o("div",{staticClass:"col-12 col-md-4 col-sm-4"},[o("q-select",{attrs:{filled:"",value:a.idFormaPago,options:a.formasPago,"option-value":"idFormaPago","option-label":"formaPago",label:"* Forma de pago","emit-value":"","map-options":"",rules:a.selRules},model:{value:a.formaPago,callback:function(e){a.formaPago=e},expression:"formaPago"}})],1),o("div",{staticClass:"col-12 col-md-4 col-sm-4"},[o("q-input",{attrs:{filled:"",value:a.valorCuota,type:"number",label:"* Valor de cuota",rules:a.cuotaRules},model:{value:a.valorCuota,callback:function(e){a.valorCuota=e},expression:"valorCuota"}})],1),o("div",{staticClass:"col-12 col-md-4 col-sm-4"},[o("q-select",{attrs:{filled:"",options:a.sucursales,label:"* Sucursal","option-value":"id","option-label":"nombreSucursal","emit-value":"","map-options":"",rules:a.selRules},model:{value:a.contrato.sucursal.id,callback:function(e){a.$set(a.contrato.sucursal,"id",e)},expression:"contrato.sucursal.id"}})],1),o("div",{staticClass:"col-12 col-md-4 col-sm-4"},[o("q-select",{attrs:{filled:"",options:a.cobradores,"option-value":"idPersona","option-label":function(e){return e.nombre1+" "+e.apellido1},label:"* Cobrador","emit-value":"","map-options":"",rules:a.selRules},model:{value:a.contrato.cobrador.idPersona,callback:function(e){a.$set(a.contrato.cobrador,"idPersona",e)},expression:"contrato.cobrador.idPersona"}})],1),o("div",{staticClass:"col-12 col-md-4 col-sm-4"},[o("q-select",{attrs:{filled:"",options:a.vendedores,label:"* Vendedor","option-value":"idPersona","option-label":function(e){return e.nombre1+" "+e.apellido1},"emit-value":"","map-options":"",rules:a.selRules},model:{value:a.contrato.vendedor.idPersona,callback:function(e){a.$set(a.contrato.vendedor,"idPersona",e)},expression:"contrato.vendedor.idPersona"}})],1),o("div",{staticClass:"col-12 col-md-4 col-sm-4"},[o("q-input",{attrs:{filled:"",type:"text",label:"Dirección de cobro"},model:{value:a.contrato.direccionCobro,callback:function(e){a.$set(a.contrato,"direccionCobro",e)},expression:"contrato.direccionCobro"}})],1),o("div",{staticClass:"col-12 col-md-4 col-sm-4"},[o("q-input",{attrs:{filled:"",type:"text",label:"Observaciones"},model:{value:a.contrato.observaciones,callback:function(e){a.$set(a.contrato,"observaciones",e)},expression:"contrato.observaciones"}})],1)])]),o("q-stepper-navigation",[o("q-btn",{staticClass:"q-ml-sm",attrs:{flat:"",color:"deep-orange",label:"Atrás"},on:{click:function(e){return a.$refs.stepper.previous()}}}),a.isEdit?a._e():o("q-btn",{attrs:{color:"secondary",label:"Guardar Contrato",disable:a.disabled,loading:a.loading},on:{click:a.saveContract}}),o("q-btn",{attrs:{color:"primary",label:"Grupo"},on:{click:function(){e.$refs.form_titular.validate().then((function(e){e&&(a.step=3)}))}}}),a.isEdit?o("q-btn",{staticClass:"q-ml-sm",attrs:{flat:"",color:"secondary",label:"Modificar"},on:{click:a.editContract}}):a._e()],1)],1),o("q-step",{attrs:{name:3,title:"Beneficiarios",icon:"people"}},[a.isMobile?o("div",{staticClass:"column items-center",staticStyle:{"padding-bottom":"0px"}},[o("q-page-sticky",{attrs:{position:"bottom-left",offset:[18,50]}},[o("q-btn",{attrs:{fab:"",icon:"add",color:"primary"},on:{click:a.addItem}})],1)],1):a._e(),o("div",{staticStyle:{"min-width":"400px","max-width":"1200px",padding:"0 20px"}},[o("q-table",{attrs:{title:"Beneficiarios","rows-per-page-label":"Items",separator:"cell",data:a.dataTable,columns:a.columns,"visible-columns":a.viewColumns,"row-key":"dataTable.id","rows-per-page-options":a.pagination,loading:a.loadingTable},scopedSlots:a._u([a.isMobile?null:{key:"top-right",fn:function(){return[o("q-btn",{attrs:{icon:"add",label:"Agregar Nuevo",color:"primary"},on:{click:a.addItem}})]},proxy:!0},{key:"header-cell-actions",fn:function(e){return[o("q-th",{attrs:{props:e}},[o("q-icon",{attrs:{name:"view_headline",size:"1.5em"}}),a._v("\n              "+a._s(e.col.label)+"\n            ")],1)]}},{key:"body-cell-actions",fn:function(e){return[o("q-td",{staticStyle:{width:"50px"},attrs:{props:e}},[o("q-btn",{attrs:{dense:"",round:"",flat:"",color:"positive",icon:"edit"},on:{click:function(t){return a.editItem(e)}}})],1)]}},{key:"body-cell-estado",fn:function(e){return[o("q-td",{attrs:{props:e}},[a._v("\n              "+a._s(a._f("FilterState")(e.row.estado))+"\n            ")])]}},{key:"no-data",fn:function(){return[o("div",{staticClass:"full-width row flex-center q-gutter-sm"},[o("span",[a._v(" No hay datos . . . crea el primer registro! ")])])]},proxy:!0}],null,!0)})],1),o("q-stepper-navigation",[o("q-btn",{staticClass:"q-ml-sm",attrs:{flat:"",color:"deep-orange",label:"Atrás",disable:a.disabled},on:{click:function(e){return a.$refs.stepper.previous()}}})],1)],1)],1)],1)},i=[],l=(t("ddb0"),t("7424")),s=t("7cf4"),n=t("30f7"),r=t("4e84"),c=t("c7a0"),d=t("d79e"),p=t("df2a"),u=t("6074"),m=t("46a2"),f=t("4f24"),h=t("c1df"),b=t.n(h),v=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("q-dialog",{ref:"dialog",on:{hide:e.onDialogHide}},[t("q-card",{staticClass:"q-dialog-plugin body-cards"},[t("q-card-section",[t("q-form",{ref:"form_modal"},[t("q-input",{attrs:{type:"text",filled:"",label:"Identificacion","lazy-rules":"",counter:""},model:{value:e.dataEmployee.identificacion,callback:function(a){e.$set(e.dataEmployee,"identificacion",a)},expression:"dataEmployee.identificacion"}}),t("q-input",{attrs:{type:"text",filled:"",label:"* Primer Nombre ","lazy-rules":"",rules:e.textRules,counter:""},model:{value:e.dataEmployee.nombre1,callback:function(a){e.$set(e.dataEmployee,"nombre1",a)},expression:"dataEmployee.nombre1"}}),t("q-input",{attrs:{type:"text",filled:"",label:"Segundo Nombre",counter:""},model:{value:e.dataEmployee.nombre2,callback:function(a){e.$set(e.dataEmployee,"nombre2",a)},expression:"dataEmployee.nombre2"}}),t("q-input",{attrs:{type:"text",filled:"",label:"* Primer Apellido ","lazy-rules":"",rules:e.textRules,counter:""},model:{value:e.dataEmployee.apellido1,callback:function(a){e.$set(e.dataEmployee,"apellido1",a)},expression:"dataEmployee.apellido1"}}),t("q-input",{attrs:{type:"text",filled:"",label:"Segundo Apellido",counter:""},model:{value:e.dataEmployee.apellido2,callback:function(a){e.$set(e.dataEmployee,"apellido2",a)},expression:"dataEmployee.apellido2"}}),t("q-input",{attrs:{type:"text",filled:"",label:"Teléfono",counter:""},model:{value:e.dataEmployee.telefono,callback:function(a){e.$set(e.dataEmployee,"telefono",a)},expression:"dataEmployee.telefono"}}),t("q-input",{attrs:{type:"text",filled:"",label:"Celular ","lazy-rules":"",counter:""},model:{value:e.dataEmployee.celular,callback:function(a){e.$set(e.dataEmployee,"celular",a)},expression:"dataEmployee.celular"}}),t("q-input",{attrs:{filled:"",mask:"date",label:"Fecha Nacimiento",clearable:""},scopedSlots:e._u([{key:"append",fn:function(){return[t("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[t("q-popup-proxy",{ref:"qDateProxy",attrs:{"transition-show":"scale","transition-hide":"scale"}},[t("q-date",{attrs:{options:e.optionDatePicker,mask:"YYYY-MM-DD"},model:{value:e.dataEmployee.fechaNacimiento,callback:function(a){e.$set(e.dataEmployee,"fechaNacimiento",a)},expression:"dataEmployee.fechaNacimiento"}},[t("div",{staticClass:"row items-center justify-end"},[t("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Cerrar",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0}]),model:{value:e.dataEmployee.fechaNacimiento,callback:function(a){e.$set(e.dataEmployee,"fechaNacimiento",a)},expression:"dataEmployee.fechaNacimiento"}}),t("br"),t("q-input",{attrs:{filled:"",mask:"date",label:"Fecha Afiliación",clearable:""},scopedSlots:e._u([{key:"append",fn:function(){return[t("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[t("q-popup-proxy",{ref:"qDateProxy",attrs:{"transition-show":"scale","transition-hide":"scale"}},[t("q-date",{attrs:{options:e.optionDatePicker,mask:"YYYY-MM-DD"},model:{value:e.fechaAfiliacion,callback:function(a){e.fechaAfiliacion=a},expression:"fechaAfiliacion"}},[t("div",{staticClass:"row items-center justify-end"},[t("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Cerrar",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0}]),model:{value:e.fechaAfiliacion,callback:function(a){e.fechaAfiliacion=a},expression:"fechaAfiliacion"}}),t("br"),t("q-select",{attrs:{filled:"",options:e.parentescos,"option-value":"idParentesco","option-label":"parentesco",label:"* Parentesco","emit-value":"","map-options":"",rules:e.selRules},model:{value:e.dataEmployee.idParentesco,callback:function(a){e.$set(e.dataEmployee,"idParentesco",a)},expression:"dataEmployee.idParentesco"}}),t("q-select",{attrs:{filled:"",options:e.optGenero,label:"* Genero",rules:e.selRules},model:{value:e.dataEmployee.genero,callback:function(a){e.$set(e.dataEmployee,"genero",a)},expression:"dataEmployee.genero"}}),t("q-input",{attrs:{filled:"",label:"Fecha Cobertura",clearable:""},scopedSlots:e._u([{key:"append",fn:function(){return[t("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[t("q-popup-proxy",{ref:"qDateProxy",attrs:{"transition-show":"scale","transition-hide":"scale"}},[t("q-date",{attrs:{options:e.optionDatePicker,mask:"YYYY-MM-DD"},model:{value:e.dataEmployee.fechaCobertura,callback:function(a){e.$set(e.dataEmployee,"fechaCobertura",a)},expression:"dataEmployee.fechaCobertura"}},[t("div",{staticClass:"row items-center justify-end"},[t("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Cerrar",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0}]),model:{value:e.dataEmployee.fechaCobertura,callback:function(a){e.$set(e.dataEmployee,"fechaCobertura",a)},expression:"dataEmployee.fechaCobertura"}}),t("br"),e.isEditBenefi&&"Si"===e.estadoFallecido?t("q-input",{attrs:{filled:"",label:"Fecha Fallecido",clearable:""},scopedSlots:e._u([{key:"append",fn:function(){return[t("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[t("q-popup-proxy",{ref:"qDateProxy",attrs:{"transition-show":"scale","transition-hide":"scale"}},[t("q-date",{attrs:{options:e.optionDatePicker,mask:"YYYY-MM-DD"},model:{value:e.dataEmployee.fechafallecido,callback:function(a){e.$set(e.dataEmployee,"fechafallecido",a)},expression:"dataEmployee.fechafallecido"}},[t("div",{staticClass:"row items-center justify-end"},[t("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Cerrar",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0}],null,!1,2879698001),model:{value:e.dataEmployee.fechafallecido,callback:function(a){e.$set(e.dataEmployee,"fechafallecido",a)},expression:"dataEmployee.fechafallecido"}}):e._e(),t("br"),e.isEditBenefi&&"Retirado"===e.estadoText?t("q-input",{attrs:{filled:"",label:"Fecha Retirado",clearable:""},scopedSlots:e._u([{key:"append",fn:function(){return[t("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[t("q-popup-proxy",{ref:"qDateProxy",attrs:{"transition-show":"scale","transition-hide":"scale"}},[t("q-date",{attrs:{options:e.optionDatePicker,mask:"YYYY-MM-DD"},model:{value:e.dataEmployee.fecharetirado,callback:function(a){e.$set(e.dataEmployee,"fecharetirado",a)},expression:"dataEmployee.fecharetirado"}},[t("div",{staticClass:"row items-center justify-end"},[t("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Cerrar",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0}],null,!1,1172599648),model:{value:e.dataEmployee.fecharetirado,callback:function(a){e.$set(e.dataEmployee,"fecharetirado",a)},expression:"dataEmployee.fecharetirado"}}):e._e(),t("br"),"Si"===e.estadoAdicional?t("q-input",{attrs:{filled:"",label:"Valor Adicional",counter:"",type:"number"},model:{value:e.dataEmployee.valoradicional,callback:function(a){e.$set(e.dataEmployee,"valoradicional",a)},expression:"dataEmployee.valoradicional"}}):e._e(),t("br"),t("q-input",{attrs:{type:"text",filled:"",label:"Observaciones",counter:""},model:{value:e.dataEmployee.observaciones,callback:function(a){e.$set(e.dataEmployee,"observaciones",a)},expression:"dataEmployee.observaciones"}}),e.isEditBenefi?t("q-toggle",{attrs:{"checked-icon":"check",color:"red","unchecked-icon":"clear",value:e.retirado,label:"Estado  "+e.estadoText},model:{value:e.retirado,callback:function(a){e.retirado=a},expression:"retirado"}}):e._e(),t("q-toggle",{attrs:{"checked-icon":"check",color:"red","unchecked-icon":"clear",value:e.adicional,label:"Adicional "+e.estadoAdicional},model:{value:e.adicional,callback:function(a){e.adicional=a},expression:"adicional"}}),e.isEditBenefi?t("q-toggle",{attrs:{"checked-icon":"check",color:"red","unchecked-icon":"clear",value:e.fallecido,label:"Fallecido "+e.estadoFallecido},model:{value:e.fallecido,callback:function(a){e.fallecido=a},expression:"fallecido"}}):e._e()],1)],1),t("q-card-actions",{attrs:{align:"center"}},[t("q-btn",{attrs:{color:"primary",label:e.textAction},on:{click:e.onOKClick}}),t("q-btn",{attrs:{color:"primary",flat:"",label:"Cancelar"},on:{click:e.onCancelClick}})],1)],1)],1)},g=[],y=t("efb5"),C={name:"ModalEmployees",data(){return{name:"",isEditBenefi:!1,retirado:!1,adicional:!1,fallecido:!1,estadoText:"Activo",estadoFallecido:"No",estadoAdicional:"No",fechaAfiliacion:b()().format("YYYY/MM/DD").toString(),textRules:[e=>e&&e.length>0||"Campo Obligatorio (*)",e=>e.length<=20||"Máximo 20 carácteres"],selRules:[e=>!!e||"Campo Obligatorio"],optGenero:["MASCULINO","FEMENINO","OTRO"],dataEmployee:{parentesco:{}},parentescos:[]}},props:{data:{type:Object,required:!0},textAction:{type:String,required:!0}},mounted(){void 0!==this.data.identificacion?(this.isEditBenefi=!0,console.log("lleno",this.isEditBenefi)):(this.isEditBenefi=!1,console.log("vacio",this.isEditBenefi))},created(){this.loadData(),this.dataEmployee=this.data,this.fechaAfiliacion=b()().format("YYYY/MM/DD").toString(),console.log("retirado",this.dataEmployee.retirado),console.log("fallecido",this.dataEmployee.fallecido),console.log("adicional",this.dataEmployee.adicional),console.log("la identificacion ",this.dataEmployee.identificacion),this.fechaAfiliacion=this.format_date(this.dataEmployee.fechaAfiliacion),null!=this.dataEmployee.fechaNacimiento&&"1999-01-01"!=this.dataEmployee.fechaNacimiento?this.dataEmployee.fechaNacimiento=this.format_date(this.dataEmployee.fechaNacimiento):this.dataEmployee.fechaNacimiento="",null!=this.dataEmployee.fechafallecido?this.dataEmployee.fechafallecido=this.format_date(this.dataEmployee.fechafallecido):this.dataEmployee.fechafallecido="",null!=this.dataEmployee.fecharetirado?this.dataEmployee.fecharetirado=this.format_date(this.dataEmployee.fecharetirado):this.dataEmployee.fecharetirado="",this.dataEmployee.fechaCobertura=this.format_date(this.dataEmployee.fechaCobertura),1==this.dataEmployee.retirado?this.retirado=!1:this.retirado=!0,1==this.dataEmployee.fallecido?this.fallecido=!0:this.fallecido=!1,1==this.dataEmployee.adicional?this.adicional=!0:this.adicional=!1,console.log("el estado  es",this.retirado),console.log("el estado adicional es",this.adicional),console.log("el data es ",this.dataEmployee)},methods:{show(){this.loadData(),this.$refs.dialog.show()},hide(){this.$refs.dialog.hide()},format_date(e){return b()(e).format("YYYY-MM-DD")},optionDatePicker(e){return e>="1900/01/01"&&e<=b()().format("YYYY/MM/DD").toString()},onDialogHide(){this.$emit("hide")},onOKClick(){this.$refs.form_modal.validate().then((e=>{e&&(this.dataEmployee.fechaAfiliacion=this.format_date(this.fechaAfiliacion),""!=this.dataEmployee.fechaNacimiento?this.dataEmployee.fechaNacimiento=this.format_date(this.dataEmployee.fechaNacimiento):this.dataEmployee.fechaNacimiento="1999-01-01",""!=this.dataEmployee.fechafallecido?this.dataEmployee.fechafallecido=this.format_date(this.dataEmployee.fechafallecido):this.dataEmployee.fechafallecido="1999-01-01",""!=this.dataEmployee.fecharetirado?this.dataEmployee.fecharetirado=this.format_date(this.dataEmployee.fecharetirado):this.dataEmployee.fecharetirado="1999-01-01",1==this.retirado?this.dataEmployee.retirado=0:this.dataEmployee.retirado=1,this.$emit("ok",this.dataEmployee),this.hide())}))},onCancelClick(){this.hide()},async loadData(){this.$q.loading.show({message:"<span class='text-orange text-weight-bold'>Consultando parámetros, por favor espere...</span>"}),await Promise.all([y["a"].list()]).then((e=>{console.log("los parentescos son",e[0].data),this.parentescos=e[0].data})).catch((e=>{console.log({err:e}),this.parentescos=[],NotifyDialog.triggerNegative("No fue posible cargar los datos de parametrización")})),this.$q.loading.hide()}},watch:{retirado(){this.estadoText=this.retirado?"Activo":"Retirado"},fallecido(){this.estadoFallecido=this.fallecido?"Si":"No"},adicional(){this.estadoAdicional=this.adicional?"Si":"No"}}},E=C,q=t("2877"),x=t("24e8"),k=t("f09f"),D=t("a370"),P=t("0378"),w=t("27f9"),A=t("0016"),N=t("7cbe"),$=t("52ee"),Y=t("9c40"),S=t("ddd8"),T=t("9564"),M=t("4b7e"),R=t("7f67"),_=t("eebe"),I=t.n(_),O=Object(q["a"])(E,v,g,!1,null,null,null),j=O.exports;I()(O,"components",{QDialog:x["a"],QCard:k["a"],QCardSection:D["a"],QForm:P["a"],QInput:w["a"],QIcon:A["a"],QPopupProxy:N["a"],QDate:$["a"],QBtn:Y["a"],QSelect:S["a"],QToggle:T["a"],QCardActions:M["a"]}),I()(O,"directives",{ClosePopup:R["a"]});var F=t("18d6");let B,Q,z=F["a"].getItem("pisco-afilweb");const V={list:async()=>{let e={"Content-Type":"application/json"};B=F["a"].getItem("identificacionTitular"),Q=F["a"].getItem("contratoTitular");let a={subdominio:z.subdomain,identificaciontitular:B,idcontrato:Q};return await l["a"].get(s["a"].apiBenefi+"list/",{params:a,headers:e}).then((e=>(console.log("los beneficiarios son",e),e))).catch((e=>e.response))},create:async(e,a,t,o)=>{console.log("el beneficiario a crear es",JSON.stringify(o)),console.log("el titukar a crear es",JSON.stringify(e));const i={"Content-Type":"application/json"};let n={identificacion:o.identificacion||"",identificaciontitular:e.identificacion,nombre1:o.nombre1,nombre2:o.nombre2||"",apellido1:o.apellido1,apellido2:o.apellido2||"",telefono:o.telefono||"",celular:o.celular||"",fechaNacimiento:o.fechaNacimiento||"1999-01-01",genero:o.genero,fechaCobertura:b()(o.fechaCobertura).format(),fechaAfiliacion:b()(o.fechaAfiliacion).format(),observaciones:o.observaciones||"",edadAfiliacion:0,idParentesco:o.idParentesco,parentesco:o.parentesco||"",adicional:o.adicional||0,fallecido:o.fallecido||0,retirado:o.retirado||0,fechafallecido:o.fechafallecido||"1999-01-01",fecharetirado:o.fecharetirado||"1999-01-01",contrato:a.idContrato,valoradicional:o.valoradicional||0,subdominio:z.subdomain};return console.log("el BENEFI a guardar es",JSON.stringify(n)),await l["a"].post(s["a"].apiBenefi+"create/",n,{headers:i}).then((e=>e)).catch((e=>e.response))},edit:async(e,a)=>{let t={"Content-Type":"application/json"},o={identificacion:a.identificacion||"",identificaciontitular:a.identificaciontitular,nombre1:a.nombre1,nombre2:a.nombre2||"",apellido1:a.apellido1,apellido2:a.apellido2||"",telefono:a.telefono||"",celular:a.celular||"",fechaNacimiento:a.fechaNacimiento||"1999-01-01",genero:a.genero,fechaCobertura:b()(a.fechaCobertura).format(),fechaAfiliacion:b()(a.fechaAfiliacion).format(),observaciones:a.observaciones||"",edadAfiliacion:0,idParentesco:a.idParentesco,parentesco:a.parentesco||"",adicional:a.adicional||0,fallecido:a.fallecido||0,retirado:a.retirado||0,fechafallecido:a.fechafallecido||"1999-01-01",fecharetirado:a.fecharetirado||"1999-01-01",contrato:a.contrato,valoradicional:a.valoradicional||0,subdominio:z.subdomain};return console.log("el beneficiario es",JSON.stringify(o)),await l["a"].put(s["a"].apiBenefi+"update/",o,{headers:t}).then((e=>(console.log("la repsuesta del benefi es",e),e))).catch((e=>(console.log({err:e}),e.response)))}};let G,H,Z;var L={name:"contract",data(){return{step:1,isEdit:!1,prevContract:"",prevtipobusqued:"",optTipoAfiliacion:["INDIVIDUAL","EMPRESARIAL"],optGenero:["MASCULINO","FEMENINO","OTRO"],departamentos:[],municipios:[],planes:[],formasPago:[],valorCuota:0,genero:"",idFormaPago:"6",formaPago:"Mensual",fechaAfiliacion:b()().format("YYYY/MM/DD").toString(),vigenciaDesde:b()().format("YYYY/MM/DD").toString(),diaCobro:b()().format("DD").toString(),zonas:[],sucursales:[],cobradores:[],vendedores:[],empresas:[],estadoTipoAfiliacion:!1,disabled:!1,loading:!1,freeRules:[e=>e&&e.length>=-1&&e.length<200||"Campo Obligatorio (*)"],textRules:[e=>e&&e.length>0&&e.length<20||"Campo Obligatorio (*)"],direccionRules:[e=>e&&e.length>0&&e.length<=200||"Campo Obligatorio (*)"],barrioRules:[e=>e&&e.length>0&&e.length<=40||"Campo Obligatorio (*)"],numberRules:[e=>!isNaN(parseFloat(e))&&e>=0&&e.length<=10||"Campo Obligatorio (*)"],telRules:[e=>!isNaN(parseFloat(e))&&e>=0&&e<=9999999999||"Campo Obligatorio (*)"],cuotaRules:[e=>!isNaN(parseFloat(e))&&e>=0&&e<=99999999||"Campo Obligatorio (*)"],cobroRules:[e=>!isNaN(parseFloat(e))&&e>=0&&e<=31||"Campo Obligatorio (*)"],emailRules:[e=>!!e||/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,6})+$/.test(e)||"Debe ser un email válido"],selRules:[e=>!!e||"Debe seleccionar una opción"],titular:{departamento:{},municipio:{}},contrato:{formapago:{},plan:{},zona:{},sucursal:{},cobrador:{},vendedor:{},empresas:{}},employeeType:"BENEFICIARIO",loadingTable:!1,pagination:[5,10,0],viewColumns:["actions","identificacion","nombre1","nombre2","apellido1","apellido2","telefono","celular","edadAfiliacion","parentesco","estadobeneficiario"],columns:[{name:"actions",label:"",field:"",align:"center",icon:"delete"},{name:"identificacion",required:!1,label:"Identificacion",field:"identificacion",sortable:!1},{name:"nombre1",required:!1,label:"Primer Nombre",field:"nombre1",sortable:!0,align:"left"},{name:"nombre2",required:!1,label:"Segundo Nombre",field:"nombre2",sortable:!0,align:"left"},{name:"apellido1",required:!1,label:"Primer Apellido",field:"apellido1",sortable:!0,align:"left"},{name:"apellido2",required:!1,label:"Segundo Apellido",field:"apellido2",sortable:!0,align:"left"},{name:"telefono",required:!1,label:"Teléfono",field:"telefono",sortable:!0,align:"left"},{name:"celular",required:!1,label:"Celular",field:"celular",sortable:!0,align:"left"},{name:"edadAfiliacion",required:!1,label:"Edad",field:"edadAfiliacion",sortable:!0,align:"left"},{name:"parentesco",required:!1,label:"Parentesco",field:"parentesco",sortable:!0,align:"left"},{name:"estadobeneficiario",required:!1,label:"Estado",field:"estadobeneficiario",sortable:!0,align:"left"}],dataTable:[],fabAction:!1,employeeId:0,employeeIdTitular:0}},mounted(){this.prevContract=this.$route.query.idcontract,this.prevtipobusqued=this.$route.query.tipobusqued,this.loadData(),console.log(this.prevtipobusqued),console.log(this.prevContract),""!=this.prevContract&&void 0!=this.prevContract&&(console.log("entro a consultar cto"),this.loadContract()),console.log("el editar es de tipo ",this.isEdit)},methods:{newContract(){this.$q.dialog({title:"Contrato",message:"¿Desea crear un nuevo contrato?",position:"bottom",ok:{push:!0,color:"primary"},cancel:{push:!0,color:"secondary"},persistent:!0}).onOk((()=>{this.titular={departamento:{},municipio:{}},this.contrato={formapago:{},plan:{},zona:{},sucursal:{},cobrador:{},vendedor:{},empresas:{}},this.$q.localStorage.remove("contratoTitular"),this.$q.localStorage.remove("identificacionTitular"),this.$q.localStorage.remove("cuotaTitular"),this.valorCuota=0,this.diaCobro=b()().format("DD").toString(),this.fechaAfiliacion=b()().format("YYYY/MM/DD").toString(),this.vigenciaDesde=b()().format("YYYY/MM/DD").toString(),this.idFormaPago="6",this.formaPago="Mensual",this.isEdit=!1,this.genero="",this.calcularVigenciaHasta(this.vigenciaDesde),this.estadoTipoAfiliacion=!1,console.log("ref #x",this.$refs.form_contrato),void 0!==this.$refs.form_contrato&&(console.log("ref #1"),this.$refs.form_contrato.reset()),console.log("ref #xx",this.$refs.form_titular),void 0!==this.$refs.form_titular&&(console.log("ref #2"),this.$refs.form_titular.reset()),console.log("ref #xxx",this.$route.query.idcontract,this.$route.path),void 0!==this.$route.query.idcontract&&(console.log("ref #3"),this.$router.push(this.$route.path))})).onCancel((()=>{})).onDismiss((()=>{}))},isValidEmail(e){const a=/^(?=[a-zA-Z0-9@._%+-]{6,254}$)[a-zA-Z0-9._%+-]{1,64}@(?:[a-zA-Z0-9-]{1,63}\.){1,8}[a-zA-Z]{2,63}$/;return a.test(e)||"Debe ser un email válido"},format_date(e){return b()(e).format("YYYY-MM-DD")},calcularVigenciaHasta(e){""!==this.contrato.vigenciaDesde?this.contrato.vigenciaHasta=b()(e).add(365,"days").format("YYYY-MM-DD"):this.contrato.vigenciaHasta=""},calcularVigenciaDesde(e){""!==this.contrato.fechaAfiliacion?(this.contrato.vigenciaDesde,b()(e).format("YYYY/MM/DD").toString()):this.contrato.vigenciaDesde=""},optionDatePicker(e){return e>="1900/01/01"&&e<=b()().format("YYYY/MM/DD").toString()},optionDatePickerDesde(e){return e>=b()(this.fechaAfiliacion).format("YYYY/MM/DD").toString()},async loadCities(e){this.disabled=!0,this.municipios=[],await n["a"].cities(e).then((e=>{console.log(e),200===(null===e||void 0===e?void 0:e.status)?this.municipios=e.data:f["a"].triggerNegative("No fue posible cargar los municipios")})),this.disabled=!1},async loadEmpresas(e){this.estadoTipoAfiliacion="EMPRESARIAL"==e},async loadValorPlan(e){await u["a"].get(e).then((e=>{console.log(e),200===(null===e||void 0===e?void 0:e.status)&&(this.valorCuota=e.data.valorBase,console.log("el listado del plan es ",e.data))}))},async loadData(){this.$q.loading.show({message:"<span class='text-orange text-weight-bold'>Consultando parámetros, por favor espere...</span>"}),this.calcularVigenciaHasta(this.vigenciaDesde),await Promise.all([n["a"].departments(),n["a"].paymentMethods(),u["a"].list(),r["a"].list(),d["a"].list(),p["a"].list("COBRADOR"),p["a"].list("VENDEDOR"),c["a"].list()]).then((e=>{this.departamentos=e[0].data,this.formasPago=e[1].data,this.planes=e[2].data,this.zonas=e[3].data,this.sucursales=e[4].data,this.cobradores=e[5].data,this.vendedores=e[6].data,this.empresas=e[7].data,console.log("las empresa son",this.empresas)})).catch((e=>{console.log({err:e}),this.departamentos=[],this.planes=[],this.formasPago=[],this.vendedores=[],this.cobradores=[],this.sucursales=[],this.zonas=[],this.empresas=[],f["a"].triggerNegative("No fue posible cargar los datos de parametrización")})),this.loadingTable=!0,await V.list().then((e=>{200===(null===e||void 0===e?void 0:e.status)&&(this.dataTable=e.data,this.parentesco=e.data.idParentesco)})),this.loadingTable=!1,this.$q.loading.hide()},async loadContract(){let e={};await m["a"].get(this.prevContract,this.prevtipobusqued).then((a=>{200===(null===a||void 0===a?void 0:a.status)?(console.log("el editar es ",a.data),this.isEdit=!0,this.contrato=a.data,this.contrato.formapago=a.data.formaPago,this.contrato.plan=a.data.plan,this.contrato.zona=a.data.zona,this.contrato.sucursal=a.data.sucursal,this.contrato.cobrador=a.data.cobrador,this.contrato.vendedor=a.data.vendedor,this.contrato.empresas=a.data.empresas,this.valorCuota=a.data.valorCuota,this.idFormaPago=a.data.formapago.idFormaPago,this.formaPago=a.data.formapago.formaPago,this.loadEmpresas(a.data.tipoAfiliacion),this.diaCobro=a.data.diaCobro,this.fechaAfiliacion=this.format_date(a.data.fechaAfiliacion),this.vigenciaDesde=this.format_date(a.data.vigenciaDesde),this.titular=a.data.titular,e=a.data.titular.municipio,this.contrato.vigenciaHasta=this.format_date(this.contrato.vigenciaHasta),this.titular.fechaNacimiento=this.format_date(this.contrato.titular.fechaNacimiento),this.titular.fechaCobertura=this.format_date(this.contrato.titular.fechaCobertura),console.log("los datos del titular son",a.data.titular),this.genero=this.titular.genero,console.log("el genero traido es",this.titular.genero,"EL GENERO AGREGADO ES",this.genero),localStorage.setItem("contratoTitular",this.contrato.idContrato),localStorage.setItem("identificacionTitular",this.titular.identificacion),localStorage.setItem("cuotaTitular",this.contrato.valorCuota),console.log("localStoragebuscarPagos-buscarnovedad",G,H),G=F["a"].getItem("buscarPagos"),H=F["a"].getItem("buscarNovedad"),Z=F["a"].getItem("buscarServicio"),"Si"==G&&(console.log("entro a redirecccionar buscarPago"),this.$router.push({path:"/payments"})),"Si"==H&&(console.log("entro a redirecccionar buscarNovedad"),this.$router.push({path:"/noveltycontract"})),"Si"==Z&&(console.log("entro a redirecccionar buscarServicio"),this.$router.push({path:"/contractadicional"})),console.log("el nuevo editar es ",this.isEdit)):(this.isEdit=!1,f["a"].triggerNegative("El Contrato no pudo ser cargado"),this.$router.push({path:"/home"}))})),void 0!==this.titular.departamento&&(await this.loadCities(this.titular.departamento.codDepartamento),this.titular.municipio=e)},async saveContract(){this.disabled=!0,this.loading=!0,this.municipios=[],this.contrato.valorCuota=this.valorCuota,this.contrato.diaCobro=this.diaCobro,this.contrato.fechaAfiliacion=this.format_date(this.fechaAfiliacion),this.contrato.vigenciaDesde=this.format_date(this.vigenciaDesde),this.contrato.formapago.idFormaPago=this.idFormaPago,this.contrato.formapago.formaPago=this.formaPago,this.titular.genero=this.genero,await m["a"].create(this.titular,this.contrato).then((e=>{var a,t,o,i;"200"===(null===(a=e.data)||void 0===a?void 0:a.codRespuesta)?(f["a"].triggerPositive(`Contrato ${null===(t=e.data)||void 0===t?void 0:t.idContrato} creado satisfactoriamente`),localStorage.setItem("contratoGuardado",null===(o=e.data)||void 0===o?void 0:o.idContrato),this.$router.push({path:"/search"})):f["a"].triggerNegative(null===(i=e.data)||void 0===i?void 0:i.msjRespuesta)})),this.loading=!1,this.disabled=!1},async editContract(){this.disabled=!0,this.loading=!0,this.municipios=[],await m["a"].edit(this.titular,this.contrato).then((e=>{var a,t;"200"===(null===(a=e.data)||void 0===a?void 0:a.codRespuesta)?f["a"].triggerPositive(`Contrato ${this.contrato.idContrato} modificado satisfactoriamente`):f["a"].triggerNegative(null===(t=e.data)||void 0===t?void 0:t.msjRespuesta)})),this.loading=!1,this.disabled=!1},editItem(e){this.fabAction=!1,this.saveOrEditItem(e.row)},addItem(){this.fabAction=!0,this.saveOrEditItem("")},saveOrEditItem(e){this.employeeId=e.identificacion,this.$q.dialog({component:j,data:this.fabAction?{}:e,parent:this,textAction:this.fabAction?"Guardar":"Modificar"}).onOk((e=>{this.fabAction?this.addRegister(e):this.editRegister(e)})).onCancel((()=>{})).onDismiss((()=>{}))},async addRegister(e){await V.create(this.titular,this.contrato,this.parentesco,e).then((e=>{console.log(e),200===(null===e||void 0===e?void 0:e.status)?(f["a"].triggerPositive("Beneficiario almacenado correctamente"),this.loadData()):f["a"].triggerNegative("El Beneficiario no pudo ser almacenado")}))},async editRegister(e){await V.edit(this.employeeId,e).then((e=>{console.log("el beneficiario respondio",e.data.msjRespuesta),200===(null===e||void 0===e?void 0:e.status)?(f["a"].triggerPositive(e.data.msjRespuesta),this.loadData()):f["a"].triggerNegative(e.data.msjRespuesta)}))}},computed:{isMobile:{get(){return this.$store.state.platform_mobile.isMobile}}}},J=L,K=t("74f7"),U=t("cf57"),W=t("f531"),X=t("87fe"),ee=t("b19c"),ae=t("de5e"),te=t("eaac"),oe=t("357e"),ie=t("db86"),le=Object(q["a"])(J,o,i,!1,null,null,null);a["default"]=le.exports;I()(le,"components",{QInnerLoading:K["a"],QSpinnerGears:U["a"],QStepper:W["a"],QStep:X["a"],QForm:P["a"],QInput:w["a"],QIcon:A["a"],QPopupProxy:N["a"],QDate:$["a"],QBtn:Y["a"],QSelect:S["a"],QStepperNavigation:ee["a"],QPageSticky:ae["a"],QTable:te["a"],QTh:oe["a"],QTd:ie["a"]}),I()(le,"directives",{ClosePopup:R["a"]})},c7a0:function(e,a,t){"use strict";t.d(a,"a",(function(){return n}));var o=t("7424"),i=t("7cf4"),l=t("18d6");let s=l["a"].getItem("pisco-afilweb");const n={list:async()=>{let e={subdominio:s.subdomain};return await o["a"].get(i["a"].apiEmpresas+"list/",{params:e}).then((e=>e)).catch((e=>e.response))}}},d79e:function(e,a,t){"use strict";t.d(a,"a",(function(){return n}));var o=t("7424"),i=t("7cf4"),l=t("18d6");let s=l["a"].getItem("pisco-afilweb");const n={list:async()=>{let e={"Content-Type":"application/json"},a={subdominio:s.subdomain};return await o["a"].get(i["a"].apiSucursal+"list/",{params:a,headers:e}).then((e=>e)).catch((e=>e.response))},create:async e=>{let a={"Content-Type":"application/json"},t={nombreSucursal:e,subdominio:s.subdomain};return await o["a"].post(i["a"].apiSucursal+"create/",t,{headers:a}).then((e=>e)).catch((e=>e.response))},edit:async(e,a)=>{let t={"Content-Type":"application/json"},l={id:e,nombreSucursal:a,estado:0,subdominio:s.subdomain};return await o["a"].put(i["a"].apiSucursal+"update/",l,{headers:t}).then((e=>e)).catch((e=>e.response))}}},df2a:function(e,a,t){"use strict";t.d(a,"a",(function(){return n}));var o=t("7424"),i=t("7cf4"),l=t("18d6");let s=l["a"].getItem("pisco-afilweb");const n={list:async e=>{let a={"Content-Type":"application/json"},t={tipoEmpleado:e,subdominio:s.subdomain};return await o["a"].get(i["a"].apiEmpleado+"list/",{params:t,headers:a}).then((e=>e)).catch((e=>e.response))},create:async e=>{let a={"Content-Type":"application/json"},t={idPersona:e.idPersona,nombre1:e.nombre1,nombre2:e.nombre2||"",apellido1:e.apellido1,apellido2:e.apellido2||"",telefono1:e.telefono1,telefono2:e.telefono02||"",tipoEmpleado:e.tipoEmpleado,subdominio:s.subdomain};return await o["a"].post(i["a"].apiEmpleado+"create/",t,{headers:a}).then((e=>e)).catch((e=>e.response))},edit:async(e,a)=>{let t={"Content-Type":"application/json"},l={id:e,idPersona:a.idPersona,nombre1:a.nombre1,nombre2:a.nombre2||"",apellido1:a.apellido1,apellido2:a.apellido2||"",telefono1:a.telefono1,telefono2:a.telefono2||"",tipoEmpleado:a.tipoEmpleado,estado:a.estado?0:1,subdominio:s.subdomain};return await o["a"].put(i["a"].apiEmpleado+"update/",l,{headers:t}).then((e=>e)).catch((e=>e.response))}}},efb5:function(e,a,t){"use strict";t.d(a,"a",(function(){return n}));var o=t("7424"),i=t("7cf4"),l=t("18d6");let s=l["a"].getItem("pisco-afilweb");const n={list:async()=>{let e={"Content-Type":"application/json"},a={subdominio:s.subdomain};return await o["a"].get(i["a"].apiKinship+"list/",{params:a,headers:e}).then((e=>e)).catch((e=>e.response))},create:async e=>{let a={"Content-Type":"application/json"},t={parentesco:e,subdominio:s.subdomain};return console.log("datos a guardar",t),await o["a"].post(i["a"].apiKinship+"create/",t,{headers:a}).then((e=>e)).catch((e=>e.response))},edit:async(e,a)=>{let t={"Content-Type":"application/json"},l={idParentesco:e,parentesco:a,subdominio:s.subdomain};return console.log("datos a guardar",l),await o["a"].put(i["a"].apiKinship+"update/",l,{headers:t}).then((e=>e)).catch((e=>e.response))}}}}]);