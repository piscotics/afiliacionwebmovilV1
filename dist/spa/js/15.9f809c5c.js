(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[15],{"18cd":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"q-pa-md full-width row justify-center content-center"},[a("div",{staticStyle:{width:"700px"}},[a("q-table",{attrs:{title:"Zonas","rows-per-page-label":"Items",separator:"cell",data:e.dataTable,columns:e.columns,"visible-columns":e.viewColumns,"row-key":"dataTable.id","rows-per-page-options":e.pagination,loading:e.loadingTable},scopedSlots:e._u([e.isMobile?null:{key:"top-right",fn:function(){return[a("q-btn",{attrs:{icon:"add",label:"Agregar Nuevo",color:"primary"},on:{click:e.addItem}})]},proxy:!0},{key:"header-cell-actions",fn:function(t){return[a("q-th",{attrs:{props:t}},[a("q-icon",{attrs:{name:"view_headline",size:"1.5em"}}),e._v("\n          "+e._s(t.col.label)+"\n        ")],1)]}},{key:"body-cell-actions",fn:function(t){return[a("q-td",{staticStyle:{width:"50px"},attrs:{props:t}},[a("q-btn",{attrs:{dense:"",round:"",flat:"",color:"positive",icon:"edit"},on:{click:function(a){return e.editItem(t)}}})],1)]}},{key:"no-data",fn:function(){return[a("div",{staticClass:"full-width row flex-center q-gutter-sm"},[a("span",[e._v(" No hay datos . . . crea el primer registro! ")])])]},proxy:!0}],null,!0)})],1),e.isMobile?a("div",{staticClass:"column items-center",staticStyle:{"padding-bottom":"0px"}},[a("q-page-sticky",{attrs:{position:"bottom-left",offset:[18,50]}},[a("q-btn",{attrs:{fab:"",icon:"add",color:"primary"},on:{click:e.addItem}})],1)],1):e._e()])},i=[],n=(a("7424"),a("7cf4"),a("4e84")),s=a("4f24"),l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-dialog",{ref:"dialog",on:{hide:e.onDialogHide}},[a("q-card",{staticClass:"q-dialog-plugin body-cards"},[a("q-card-section",[a("q-form",{ref:"form_modal"},[a("q-input",{attrs:{type:"text",filled:"",label:"Nombre de la zona","lazy-rules":"",rules:e.textRules,counter:""},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1)],1),a("q-card-actions",{attrs:{align:"center"}},[a("q-btn",{attrs:{color:"primary",label:e.textAction},on:{click:e.onOKClick}}),a("q-btn",{attrs:{color:"primary",flat:"",label:"Cancelar"},on:{click:e.onCancelClick}})],1)],1)],1)},r=[],c={name:"ModalZones",data(){return{name:"",textRules:[e=>e&&e.length>0||"Campo Obligatorio (*)",e=>e.length<=20||"Máximo 20 carácteres"]}},props:{valueField:{type:String,required:!0},textAction:{type:String,required:!0}},created(){this.name=this.valueField},methods:{show(){this.$refs.dialog.show()},hide(){this.$refs.dialog.hide()},onDialogHide(){this.$emit("hide")},onOKClick(){this.$refs.form_modal.validate().then((e=>{e&&(this.$emit("ok",this.name),this.hide())}))},onCancelClick(){this.hide()}}},d=c,u=a("2877"),m=a("24e8"),p=a("f09f"),h=a("a370"),b=a("0378"),g=a("27f9"),f=a("4b7e"),v=a("9c40"),y=a("eebe"),w=a.n(y),C=Object(u["a"])(d,l,r,!1,null,null,null),A=C.exports;w()(C,"components",{QDialog:m["a"],QCard:p["a"],QCardSection:h["a"],QForm:b["a"],QInput:g["a"],QCardActions:f["a"],QBtn:v["a"]});var q={name:"Zones",data(){return{loadingTable:!1,pagination:[5,10,0],viewColumns:["actions","nombreZona"],columns:[{name:"actions",label:"",field:"",align:"center",icon:"delete"},{name:"id",required:!1,label:"id",field:"id",sortable:!1},{name:"nombreZona",required:!1,label:"Nombre Zona",field:"nombreZona",sortable:!0,align:"left"}],dataTable:[],fabAction:!1}},beforeMount(){this.loadData()},methods:{editItem(e){this.fabAction=!1,this.saveOrEditItem(e.row)},addItem(){this.fabAction=!0,this.saveOrEditItem("")},saveOrEditItem(e){this.$q.dialog({component:A,valueField:this.fabAction?"":e.nombreZona,parent:this,textAction:this.fabAction?"Guardar":"Modificar"}).onOk((t=>{this.fabAction?this.addRegister(t):this.editRegister(t,e.id)})).onCancel((()=>{})).onDismiss((()=>{}))},async addRegister(e){await n["a"].create(e).then((e=>{console.log(e),200===(null===e||void 0===e?void 0:e.status)?(s["a"].triggerPositive("Registro almacenado correctamente"),this.loadData()):s["a"].triggerNegative("El registro no pudo ser almacenado")}))},async editRegister(e,t){await n["a"].edit(t,e).then((e=>{console.log(e),200===(null===e||void 0===e?void 0:e.status)?(s["a"].triggerPositive("Registro modificado correctamente"),this.loadData()):s["a"].triggerNegative("El registro no pudo ser modificado")}))},async loadData(){this.loadingTable=!0,await n["a"].list().then((e=>{200===(null===e||void 0===e?void 0:e.status)&&(this.dataTable=e.data)})),this.loadingTable=!1}},computed:{isMobile:{get(){return this.$store.state.platform_mobile.isMobile}}}},T=q,k=a("eaac"),O=a("357e"),x=a("0016"),E=a("db86"),I=a("de5e"),Q=Object(u["a"])(T,o,i,!1,null,null,null);t["default"]=Q.exports;w()(Q,"components",{QTable:k["a"],QBtn:v["a"],QTh:O["a"],QIcon:x["a"],QTd:E["a"],QPageSticky:I["a"]})},"4e84":function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var o=a("7424"),i=a("7cf4"),n=a("18d6");let s=n["a"].getItem("pisco-afilweb");const l={list:async()=>{let e={"Content-Type":"application/json","Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET, POST, PUT, DELETE, PATCH, OPTIONS","Access-Control-Allow-Headers":"X-Requested-With, content-type, Authorization"},t={subdominio:s.subdomain};return await o["a"].get(i["a"].apiZona+"list/",{params:t,headers:e}).then((e=>e)).catch((e=>e.response))},create:async e=>{let t={"Content-Type":"application/json","Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET, POST, PUT, DELETE, PATCH, OPTIONS","Access-Control-Allow-Headers":"X-Requested-With, content-type, Authorization"},a={nombreZona:e,subdominio:s.subdomain};return await o["a"].post(i["a"].apiZona+"create/",a,{headers:t}).then((e=>e)).catch((e=>e.response))},edit:async(e,t)=>{let a={"Content-Type":"application/json"},n={id:e,nombreZona:t,subdominio:s.subdomain};return await o["a"].put(i["a"].apiZona+"update",n,{headers:a}).then((e=>e)).catch((e=>e.response))}}}}]);