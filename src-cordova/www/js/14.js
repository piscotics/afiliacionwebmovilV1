(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[14],{"1fc3":function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));var o=a("11ce"),l=a("8039"),i=a("caca");let n=i["a"].getItem("pisco-afilweb");const d={list:async e=>{let t={"Content-Type":"application/json"},a={tipoEmpleado:e,subdominio:n.subdomain};return await o["a"].get(l["a"].apiEmpleado+"list/",{params:a,headers:t}).then((e=>e)).catch((e=>e.response))},create:async e=>{let t={"Content-Type":"application/json"},a={idPersona:e.idPersona,nombre1:e.nombre1,nombre2:e.nombre2||"",apellido1:e.apellido1,apellido2:e.apellido2||"",telefono1:e.telefono1,telefono2:e.telefono02||"",tipoEmpleado:e.tipoEmpleado,subdominio:n.subdomain};return await o["a"].post(l["a"].apiEmpleado+"create/",a,{headers:t}).then((e=>e)).catch((e=>e.response))},edit:async(e,t)=>{let a={"Content-Type":"application/json"},i={id:e,idPersona:t.idPersona,nombre1:t.nombre1,nombre2:t.nombre2||"",apellido1:t.apellido1,apellido2:t.apellido2||"",telefono1:t.telefono1,telefono2:t.telefono2||"",tipoEmpleado:t.tipoEmpleado,estado:t.estado?0:1,subdominio:n.subdomain};return await o["a"].put(l["a"].apiEmpleado+"update/",i,{headers:a}).then((e=>e)).catch((e=>e.response))}}},fb31:function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"q-pa-md full-width row justify-center content-center"},[a("div",{staticClass:"full-width row justify-center"},[a("q-radio",{attrs:{val:"COBRADOR",label:"Cobradores",disable:e.loadingTable},on:{input:e.loadData},model:{value:e.employeeType,callback:function(t){e.employeeType=t},expression:"employeeType"}}),a("q-radio",{attrs:{val:"VENDEDOR",label:"Asesores",disable:e.loadingTable},on:{input:e.loadData},model:{value:e.employeeType,callback:function(t){e.employeeType=t},expression:"employeeType"}})],1),a("div",{staticStyle:{"min-width":"400px","max-width":"1200px",padding:"0 20px"}},[a("q-table",{attrs:{title:"Empleados","rows-per-page-label":"Items",separator:"cell",data:e.dataTable,columns:e.columns,"visible-columns":e.viewColumns,"row-key":"dataTable.id","rows-per-page-options":e.pagination,loading:e.loadingTable},scopedSlots:e._u([e.isMobile?null:{key:"top-right",fn:function(){return[a("q-btn",{attrs:{icon:"add",label:"Agregar Nuevo",color:"primary"},on:{click:e.addItem}})]},proxy:!0},{key:"header-cell-actions",fn:function(t){return[a("q-th",{attrs:{props:t}},[a("q-icon",{attrs:{name:"view_headline",size:"1.5em"}}),e._v("\n          "+e._s(t.col.label)+"\n        ")],1)]}},{key:"body-cell-actions",fn:function(t){return[a("q-td",{staticStyle:{width:"50px"},attrs:{props:t}},[a("q-btn",{attrs:{dense:"",round:"",flat:"",color:"positive",icon:"edit"},on:{click:function(a){return e.editItem(t)}}})],1)]}},{key:"body-cell-estado",fn:function(t){return[a("q-td",{attrs:{props:t}},[e._v("\n          "+e._s(e._f("FilterState")(t.row.estado))+"\n        ")])]}},{key:"no-data",fn:function(){return[a("div",{staticClass:"full-width row flex-center q-gutter-sm"},[a("span",[e._v(" No hay datos . . . crea el primer registro! ")])])]},proxy:!0}],null,!0)})],1),e.isMobile?a("div",{staticClass:"column items-center",staticStyle:{"padding-bottom":"0px"}},[a("q-page-sticky",{attrs:{position:"bottom-left",offset:[18,50]}},[a("q-btn",{attrs:{fab:"",icon:"add",color:"primary"},on:{click:e.addItem}})],1)],1):e._e()])},l=[],i=(a("11ce"),a("8039"),a("1fc3")),n=a("5bc2"),d=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-dialog",{ref:"dialog",on:{hide:e.onDialogHide}},[a("q-card",{staticClass:"q-dialog-plugin body-cards"},[a("q-card-section",[a("q-form",{ref:"form_modal"},[a("q-input",{attrs:{type:"text",filled:"",label:"Identificacion *","lazy-rules":"",rules:e.textRules,counter:""},model:{value:e.dataEmployee.idPersona,callback:function(t){e.$set(e.dataEmployee,"idPersona",t)},expression:"dataEmployee.idPersona"}}),a("q-input",{attrs:{type:"text",filled:"",label:"Primer Nombre *","lazy-rules":"",rules:e.textRules,counter:""},model:{value:e.dataEmployee.nombre1,callback:function(t){e.$set(e.dataEmployee,"nombre1",t)},expression:"dataEmployee.nombre1"}}),a("q-input",{attrs:{type:"text",filled:"",label:"Segundo Nombre",counter:""},model:{value:e.dataEmployee.nombre2,callback:function(t){e.$set(e.dataEmployee,"nombre2",t)},expression:"dataEmployee.nombre2"}}),a("q-input",{attrs:{type:"text",filled:"",label:"Primer Apellido *","lazy-rules":"",rules:e.textRules,counter:""},model:{value:e.dataEmployee.apellido1,callback:function(t){e.$set(e.dataEmployee,"apellido1",t)},expression:"dataEmployee.apellido1"}}),a("q-input",{attrs:{type:"text",filled:"",label:"Segundo Apellido",counter:""},model:{value:e.dataEmployee.apellido2,callback:function(t){e.$set(e.dataEmployee,"apellido2",t)},expression:"dataEmployee.apellido2"}}),a("q-input",{attrs:{type:"text",filled:"",label:"Teléfono Uno *","lazy-rules":"",rules:e.textRules,counter:""},model:{value:e.dataEmployee.telefono1,callback:function(t){e.$set(e.dataEmployee,"telefono1",t)},expression:"dataEmployee.telefono1"}}),a("q-input",{attrs:{type:"text",filled:"",label:"Teléfono Dos",counter:""},model:{value:e.dataEmployee.telefono2,callback:function(t){e.$set(e.dataEmployee,"telefono2",t)},expression:"dataEmployee.telefono2"}}),a("q-select",{attrs:{filled:"",options:e.optEmpleado,label:"Tipo Empleado",rules:e.selRules},model:{value:e.dataEmployee.tipoEmpleado,callback:function(t){e.$set(e.dataEmployee,"tipoEmpleado",t)},expression:"dataEmployee.tipoEmpleado"}}),a("q-toggle",{attrs:{"checked-icon":"check",color:"red","unchecked-icon":"clear",value:e.estado,label:"Estado del empleado "+e.estadoText},model:{value:e.estado,callback:function(t){e.estado=t},expression:"estado"}})],1)],1),a("q-card-actions",{attrs:{align:"center"}},[a("q-btn",{attrs:{color:"primary",label:e.textAction},on:{click:e.onOKClick}}),a("q-btn",{attrs:{color:"primary",flat:"",label:"Cancelar"},on:{click:e.onCancelClick}})],1)],1)],1)},s=[],r={name:"ModalEmployees",data(){return{name:"",estado:!0,estadoText:"Activo",textRules:[e=>e&&e.length>0||"Campo Obligatorio (*)",e=>e.length<=20||"Máximo 20 carácteres"],selRules:[e=>!!e||"Campo Obligatorio"],optEmpleado:["COBRADOR","VENDEDOR"],dataEmployee:{}}},props:{data:{type:Object,required:!0},textAction:{type:String,required:!0}},created(){this.dataEmployee=this.data,this.estado=void 0!==this.dataEmployee.estado&&0==this.dataEmployee.estado,console.log(this.estado)},methods:{show(){this.$refs.dialog.show()},hide(){this.$refs.dialog.hide()},onDialogHide(){this.$emit("hide")},onOKClick(){this.$refs.form_modal.validate().then((e=>{e&&(this.$emit("ok",this.dataEmployee),this.hide())}))},onCancelClick(){this.hide()}},watch:{estado(){this.estadoText=this.estado?"Activo":" Inactivo"}}},p=r,c=a("a6c2"),m=a("ec6d"),u=a("5ce7"),b=a("7006"),f=a("3548"),y=a("a3be"),h=a("f636"),g=a("a184"),E=a("84df"),v=a("ef9c"),q=a("63c1"),x=a.n(q),k=Object(c["a"])(p,d,s,!1,null,null,null),T=k.exports;x()(k,"components",{QDialog:m["a"],QCard:u["a"],QCardSection:b["a"],QForm:f["a"],QInput:y["a"],QSelect:h["a"],QToggle:g["a"],QCardActions:E["a"],QBtn:v["a"]});var w={name:"Employees",data(){return{employeeType:"COBRADOR",loadingTable:!1,pagination:[5,10,0],viewColumns:["actions","idPersona","nombre1","nombre2","apellido1","apellido2","telefono1","telefono2","tipoEmpleado","estado"],columns:[{name:"actions",label:"",field:"",align:"center",icon:"delete"},{name:"idPersona",required:!1,label:"Identificacion",field:"idPersona",sortable:!1},{name:"nombre1",required:!1,label:"Primer Nombre",field:"nombre1",sortable:!0,align:"left"},{name:"nombre2",required:!1,label:"Segundo Nombre",field:"nombre2",sortable:!0,align:"left"},{name:"apellido1",required:!1,label:"Primer Apellido",field:"apellido1",sortable:!0,align:"left"},{name:"apellido2",required:!1,label:"Segundo Apellido",field:"apellido2",sortable:!0,align:"left"},{name:"telefono1",required:!1,label:"Teléfono 1",field:"telefono1",sortable:!0,align:"left"},{name:"telefono2",required:!1,label:"Teléfono 2",field:"telefono2",sortable:!0,align:"left"},{name:"tipoEmpleado",required:!1,label:"Tipo Empleado",field:"tipoEmpleado",sortable:!0,align:"left"},{name:"estado",required:!1,label:"Estado",field:"estado",sortable:!0,align:"left"}],dataTable:[],fabAction:!1,employeeId:0}},beforeMount(){this.loadData()},methods:{editItem(e){this.fabAction=!1,this.saveOrEditItem(e.row)},addItem(){this.fabAction=!0,this.saveOrEditItem("")},saveOrEditItem(e){this.employeeId=e.idPersona,this.$q.dialog({component:T,data:this.fabAction?{}:e,parent:this,textAction:this.fabAction?"Guardar":"Modificar"}).onOk((e=>{this.fabAction?this.addRegister(e):this.editRegister(e)})).onCancel((()=>{})).onDismiss((()=>{}))},async addRegister(e){await i["a"].create(e).then((e=>{console.log(e),200===(null===e||void 0===e?void 0:e.status)?(n["a"].triggerPositive("Registro almacenado correctamente"),this.loadData()):n["a"].triggerNegative("El registro no pudo ser almacenado")}))},async editRegister(e){await i["a"].edit(this.employeeId,e).then((e=>{console.log(e),200===(null===e||void 0===e?void 0:e.status)?(n["a"].triggerPositive("Registro modificado correctamente"),this.loadData()):n["a"].triggerNegative("El registro no pudo ser modificado")}))},async loadData(){this.loadingTable=!0,await i["a"].list(this.employeeType).then((e=>{200===(null===e||void 0===e?void 0:e.status)&&(this.dataTable=e.data)})),this.loadingTable=!1}},computed:{isMobile:{get(){return this.$store.state.platform_mobile.isMobile}}}},C=w,R=a("b684"),A=a("3846"),O=a("8e7e"),D=a("19dc"),I=a("7b08"),P=a("6d58"),$=Object(c["a"])(C,o,l,!1,null,null,null);t["default"]=$.exports;x()($,"components",{QRadio:R["a"],QTable:A["a"],QBtn:v["a"],QTh:O["a"],QIcon:D["a"],QTd:I["a"],QPageSticky:P["a"]})}}]);